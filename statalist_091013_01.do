
*----------------------------- input -------------------------------------------
clear 

input id       exposure        year
1                3                 1
1                3                 2
1                4                 3
1                3                 4
1                3                 5
2                4                 1
2                4                 2
2                3                 3
2                4                 4
3                1                 1
3                2                 2
3                3                 3
3                2                 4
4                1                 1
4                3                 2
end

*---------------------- what you want ------------------------------------------

bysort id: gen count = _N
collapse (mean) exposure if count >= 3, by(id)

*-------------------------- end ------------------------------------------------
